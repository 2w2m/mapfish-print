<html>
  <head>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
      <script type="text/javascript">
          function post() {
          var data = $('#spec').serialize(true);
          $.ajax({
              type: 'POST',
              url: 'pdf/create.json',
              data: data,
              success: function (data) {
                var result = jQuery.parseJSON(data)
                location.href = result.getURL;
              },
              dataType: 'application/json',
              contentType: "application/x-www-form-urlencoded; charset=UTF-8"
            });

          }
      </script>
  </head>
  <body>
    <h1>Test page</h1>

    <form id="spec" action="pdf/print.pdf">
      <textarea name="spec" cols="80" rows="30">
{
    "units": "m",
    "srs": "EPSG:2193",
    "layout": "A4 Portrait",
    "dpi": 72,
    "layers": [
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fscenz_topo_new.map&TRANSPARENT=true&FORMAT=image%2Fsvg%2Bxml",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "coastpoly",
                "veg",
                "urban_grp",
                "contours",
                "water",
                "coast_feats",
                "height_pnts",
                "transport"
            ],
            "format": "image/svg+xml",
            "styles": [
                ""
            ],
            "legend": false,
            "name": "Colour Topographic"
        },
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fbasemap_raster.map&TRANSPARENT=true&FORMAT=image%2Fpng",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "slope"
            ],
            "format": "image/png",
            "styles": [
                ""
            ],
            "legend": true,
            "name": "Steepness of Slope"
        },
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fscenz_topo_new.map&FORMAT=image%2Fsvg%2Bxml&TRANSPARENT=true",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "water"
            ],
            "format": "image/svg+xml",
            "styles": [
                ""
            ],
            "legend": false,
            "name": "Water Group"
        },
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fscenz_topo_new.map&FORMAT=image%2Fsvg%2Bxml&TRANSPARENT=true",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "transport"
            ],
            "format": "image/svg+xml",
            "styles": [
                ""
            ],
            "legend": false,
            "name": "Transport"
        },
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv601?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fm6scenz_topo_new.map&FORMAT=image%2Fsvg%2Bxml&TRANSPARENT=true",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "text"
            ],
            "format": "image/svg+xml",
            "styles": [
                ""
            ],
            "legend": false,
            "name": "Cartographic Text"
        }
    ],
    "pages": [
        {
            "center": [
                1879637.3954403,
                5829647.9082123
            ],
            "scale": 25000,
            "scaleName": "1:25,000",
            "rotation": 0,
            "mapTitle": ""
        }
    ],
    "legends": [
        {
            "name": "Steepness of Slope",
            "classes": [
                {
                    "name": "Flat to Gently Undulating (0-3ยบ) DEGREES[\u00B0]",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C0&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                },
                {
                    "name": "Undulating (4-7&deg;)",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C1&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                },
                {
                    "name": "Rolling (8-15&deg;)",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C2&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                },
                {
                    "name": "Strongly rolling (16-20&deg;)",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C3&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                },
                {
                    "name": "Moderately steep (21-25&deg;)",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C4&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                },
                {
                    "name": "Steep (26-35&deg;)",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C5&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                },
                {
                    "name": "Very steep (&gt;35&deg;)",
                    "icon": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?map=/opt/mapserver/mapfiles/basemap_raster_svg.map&transparent=true&REQUEST=GetLegendGraphic&EXCEPTIONS=application%2Fvnd.ogc.se_xml&ICON=slope%2C6&FORMAT=image%2Fsvg%2Bxml&MODE=legendicon"
                }
            ]
        }
    ],
    "app": "environment_theme"
}
      </textarea><br>
        <button name="Print">Get Print</button>
        <button name="Post Print" type="button" onclick="javascript:post()">Post Print</button>
    </form>
    <p>
      To get informations: <a href="pdf/info.json">printInfo</a>
    </p>
  </body>
</html>
