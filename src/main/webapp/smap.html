<html>
  <head>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
      <script type="text/javascript">
          function post() {
          var data = $('#spec').serialize(true);
          $.ajax({
              type: 'POST',
              url: 'pdf/create.json',
              data: data,
              success: function (data) {
                var result = jQuery.parseJSON(data)
                location.href = result.getURL;
              },
              dataType: 'application/json'
            });

          }
      </script>
  </head>
  <body>
    <h1>Test page</h1>

    <form id="spec" action="pdf/print.pdf">
      <textarea name="spec" cols="80" rows="30">
{
    "units": "m",
    "srs": "EPSG:2193",
    "layout": "A4 Portrait",
    "dpi": 72,
    "layers": [
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv.svn?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fscenz_topo_new.map&TRANSPARENT=true&FORMAT=image%2Fsvg%2Bxml",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "coastpoly",
                "veg",
                "urban_grp",
                "contours",
                "water",
                "coast_feats",
                "height_pnts",
                "transport"
            ],
            "format": "image/svg+xml",
            "styles": [
                ""
            ],
            "legend": false,
            "name": "Colour Topographic"
        },
        {
            "baseURL": "http://basemap-web.zen.landcareresearch.co.nz/cgi-bin/mapserv601?MAP=%2Fopt%2Fmapserver%2Fmapfiles%2Fm6scenz_topo_new.map&FORMAT=image%2Fsvg%2Bxml&TRANSPARENT=true",
            "opacity": 1,
            "singleTile": false,
            "type": "WMS",
            "layers": [
                "text"
            ],
            "format": "image/svg+xml",
            "styles": [
                ""
            ],
            "legend": false,
            "name": "Cartographic Text"
        }
    ],
    "pages": [
        {
            "center": [
                1667733.2967574,
                5440733.3653374
            ],
            "scale": 500000,
            "scaleName": "1:500,000",
            "rotation": 0,
            "mapTitle": ""
        }
    ],
    "legends": [],
    "app": "smap"
}
      </textarea><br>
        <button name="Print">Get Print</button>
        <button name="Post Print" type="button" onclick="javascript:post()">Post Print</button>
    </form>
    <p>
      To get informations: <a href="pdf/info.json">printInfo</a>
    </p>
  </body>
</html>
